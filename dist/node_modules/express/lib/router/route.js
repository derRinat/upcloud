function Route(e){debug("new %s",e),this.path=e,this.stack=[],this.methods={}}var debug=require("debug")("express:router:route"),Layer=require("./layer"),methods=require("methods"),utils=require("../utils");module.exports=Route,Route.prototype._handles_method=function(t){return this.methods._all?!0:(t=t.toLowerCase(),t==="head"&&!this.methods.head&&(t="get"),Boolean(this.methods[t]))},Route.prototype._options=function(){return Object.keys(this.methods).map(function(e){return e.toUpperCase()})},Route.prototype.dispatch=function(e,t,n){function o(u){if(u&&u==="route")return n();var a=i[r++];if(!a)return n(u);if(a.method&&a.method!==s)return o(u);u?a.handle_error(u,e,t,o):a.handle_request(e,t,o)}var r=0,i=this.stack;if(i.length===0)return n();var s=e.method.toLowerCase();s==="head"&&!this.methods.head&&(s="get"),e.route=this,o()},Route.prototype.all=function(){var e=utils.flatten([].slice.call(arguments));return e.forEach(function(e){if(typeof e!="function"){var t={}.toString.call(e),n="Route.all() requires callback functions but got a "+t;throw new Error(n)}var r=Layer("/",{},e);r.method=undefined,this.methods._all=!0,this.stack.push(r)},this),this},methods.forEach(function(e){Route.prototype[e]=function(){var t=utils.flatten([].slice.call(arguments));return t.forEach(function(t){if(typeof t!="function"){var n={}.toString.call(t),r="Route."+e+"() requires callback functions but got a "+n;throw new Error(r)}debug("%s %s",e,this.path);var i=Layer("/",{},t);i.method=e,this.methods[e]=!0,this.stack.push(i)},this),this}});