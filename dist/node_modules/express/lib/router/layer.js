function Layer(e,t,n){if(!(this instanceof Layer))return new Layer(e,t,n);debug("new %s",e),t=t||{},this.handle=n,this.name=n.name||"<anonymous>",this.params=undefined,this.path=undefined,this.regexp=pathRegexp(e,this.keys=[],t),e==="/"&&t.end===!1&&(this.regexp.fast_slash=!0)}function decode_param(e){if(typeof e!="string")return e;try{return decodeURIComponent(e)}catch(t){var n=new TypeError("Failed to decode param '"+e+"'");throw n.status=400,n}}var pathRegexp=require("path-to-regexp"),debug=require("debug")("express:router:layer"),hasOwnProperty=Object.prototype.hasOwnProperty;module.exports=Layer,Layer.prototype.handle_error=function(t,n,r,i){var s=this.handle;if(s.length!==4)return i(t);try{s(t,n,r,i)}catch(o){i(o)}},Layer.prototype.handle_request=function(t,n,r){var i=this.handle;if(i.length>3)return r();try{i(t,n,r)}catch(s){r(s)}},Layer.prototype.match=function(t){if(t==null)return this.params=undefined,this.path=undefined,!1;if(this.regexp.fast_slash)return this.params={},this.path="",!0;var n=this.regexp.exec(t);if(!n)return this.params=undefined,this.path=undefined,!1;this.params={},this.path=n[0];var r=this.keys,i=this.params,s,o=0,u,a;for(var f=1,l=n.length;f<l;++f){u=r[f-1],s=u?u.name:o++,a=decode_param(n[f]);if(a!==undefined||!hasOwnProperty.call(i,s))i[s]=a}return!0};