function View(e,t){t=t||{},this.name=e,this.root=t.root;var n=t.engines;this.defaultEngine=t.defaultEngine;var r=this.ext=extname(e);if(!r&&!this.defaultEngine)throw new Error("No default engine was specified and no extension was provided.");r||(e+=r=this.ext=("."!=this.defaultEngine[0]?".":"")+this.defaultEngine),this.engine=n[r]||(n[r]=require(r.slice(1)).__express),this.path=this.lookup(e)}function tryStat(e){debug('stat "%s"',e);try{return fs.statSync(e)}catch(t){return undefined}}var debug=require("debug")("express:view"),path=require("path"),fs=require("fs"),utils=require("./utils"),dirname=path.dirname,basename=path.basename,extname=path.extname,join=path.join,resolve=path.resolve;module.exports=View,View.prototype.lookup=function(t){var n,r=[].concat(this.root);debug('lookup "%s"',t);for(var i=0;i<r.length&&!n;i++){var s=r[i],o=resolve(s,t),u=dirname(o),a=basename(o);n=this.resolve(u,a)}return n},View.prototype.render=function(t,n){debug('render "%s"',this.path),this.engine(this.path,t,n)},View.prototype.resolve=function(t,n){var r=this.ext,i,s;i=join(t,n),s=tryStat(i);if(s&&s.isFile())return i;i=join(t,basename(n,r),"index"+r),s=tryStat(i);if(s&&s.isFile())return i};