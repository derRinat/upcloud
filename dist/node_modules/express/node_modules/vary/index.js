/*!
 * vary
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */

function append(e,t){if(typeof e!="string")throw new TypeError("header argument is required");if(!t)throw new TypeError("field argument is required");var n=Array.isArray(t)?t:parse(String(t));for(var r=0;r<n.length;r++)if(separators.test(n[r]))throw new TypeError("field argument contains an invalid header");if(e==="*")return e;var i=parse(e.toLowerCase());if(n.indexOf("*")!==-1||i.indexOf("*")!==-1)return"*";for(var r=0;r<n.length;r++)t=n[r].toLowerCase(),i.indexOf(t)===-1&&(i.push(t),e=e?e+", "+n[r]:n[r]);return e}function parse(e){return e.trim().split(/ *, */)}function vary(e,t){if(!e||!e.getHeader||!e.setHeader)throw new TypeError("res argument is required");var n=e.getHeader("Vary")||"",r=Array.isArray(n)?n.join(", "):String(n);e.setHeader("Vary",append(r,t))}module.exports=vary,module.exports.append=append;var separators=/[\(\)<>@,;:\\"\/\[\]\?=\{\}\u0020\u0009]/;