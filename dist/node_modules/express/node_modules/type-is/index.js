function typeis(e,t){var n,r=t;e=typenormalize(e);if(!e)return!1;if(r&&!Array.isArray(r)){r=new Array(arguments.length-1);for(n=0;n<r.length;n++)r[n]=arguments[n+1]}if(!r||!r.length)return e;var i;for(n=0;n<r.length;n++)if(mimeMatch(normalize(i=r[n]),e))return i[0]==="+"||~i.indexOf("*")?e:i;return!1}function hasbody(e){var t=e.headers;return"transfer-encoding"in t?!0:!isNaN(t["content-length"])}function typeofrequest(e,t){var n=t;if(!hasbody(e))return null;if(arguments.length>2){n=new Array(arguments.length-1);for(var r=0;r<n.length;r++)n[r]=arguments[r+1]}var i=e.headers["content-type"];return typeis(i,n)}function normalize(e){switch(e){case"urlencoded":return"application/x-www-form-urlencoded";case"multipart":e="multipart/*"}return e[0]==="+"||~e.indexOf("/")?e:mime.lookup(e)}function mimeMatch(e,t){return e===!1?!1:e===t?!0:(t=t.split("/"),e[0]==="+"?Boolean(t[1])&&e.length<=t[1].length&&e===t[1].substr(0-e.length):~e.indexOf("*")?(e=e.split("/"),e[0]==="*"?e[1]===t[1]:e[1]==="*"?e[0]===t[0]:e[1][0]==="*"&&e[1][1]==="+"?e[0]===t[0]&&e[1].length<=t[1].length+1&&e[1].substr(1)===t[1].substr(1-e[1].length):!1):!1)}function typenormalize(e){try{var t=typer.parse(e);return delete t.parameters,typer.format(t)}catch(n){return null}}var typer=require("media-typer"),mime=require("mime-types");module.exports=typeofrequest,typeofrequest.is=typeis,typeofrequest.hasBody=hasbody,typeofrequest.normalize=normalize,typeofrequest.match=mimeMatch;