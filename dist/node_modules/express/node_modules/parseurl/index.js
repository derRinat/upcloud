/*!
 * parseurl
 * Copyright(c) 2014 Jonathan Ong
 * Copyright(c) 2014 Douglas Christopher Wilson
 * MIT Licensed
 */

function parseurl(e){var t=e.url;if(t===undefined)return undefined;var n=e._parsedUrl;return fresh(t,n)?n:(n=fastparse(t),n._raw=t,e._parsedUrl=n)}function originalurl(e){var t=e.originalUrl;if(typeof t!="string")return parseurl(e);var n=e._parsedOriginalUrl;return fresh(t,n)?n:(n=fastparse(t),n._raw=t,e._parsedOriginalUrl=n)}function fastparse(e){var t=typeof e=="string"&&simplePathRegExp.exec(e);if(t){var n=t[1],r=t[2]||null,i=Url!==undefined?new Url:{};return i.path=e,i.href=e,i.pathname=n,i.search=r,i.query=r&&r.substr(1),i}return parse(e)}function fresh(e,t){return typeof t=="object"&&t!==null&&(Url===undefined||t instanceof Url)&&t._raw===e}var url=require("url"),parse=url.parse,Url=url.Url,simplePathRegExp=/^(\/\/?(?!\/)[^\?#\s]*)(\?[^#\s]*)?$/;module.exports=parseurl,module.exports.original=originalurl;